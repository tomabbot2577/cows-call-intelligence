{
  "permissions": {
    "allow": [
      "Bash(curl:*)",
      "Bash(/var/www/call-recording-system/venv/bin/python:*)",
      "Bash(awk:*)",
      "Bash(cat:*)",
      "Bash(python3:*)",
      "Bash(find:*)",
      "Bash(screen:*)",
      "Bash(grep:*)",
      "Bash(chmod:*)",
      "Bash(tee:*)",
      "WebFetch(domain:pypi.org)",
      "Bash(pkill:*)",
      "Bash(python test_enhanced_storage.py)",
      "Bash(git add:*)",
      "Bash(git push:*)",
      "Bash(git commit:*)",
      "Bash(psql:*)",
      "WebSearch",
      "WebFetch(domain:docs.salad.com)",
      "Bash(nginx:*)",
      "Bash(ln:*)",
      "Bash(systemctl reload:*)",
      "Bash(source:*)",
      "Bash(./git_push.sh)",
      "Bash(git reset:*)",
      "Bash(git config:*)",
      "Bash(/var/www/call-recording-system/venv/bin/pip install flask flask-session)",
      "Bash(xargs ls:*)",
      "Bash(xargs cat:*)",
      "WebFetch(domain:openrouter.ai)",
      "WebFetch(domain:github.com)",
      "Bash(python:*)",
      "Bash(sqlite3:*)",
      "Bash(/var/www/call-recording-system/venv/bin/pip install psycopg2-binary --quiet)",
      "Bash(sudo -u postgres psql:*)",
      "Bash(sudo apt-get:*)",
      "Bash(sudo apt-get install:*)",
      "Bash(apt-cache:*)",
      "Bash(/var/www/call-recording-system/venv/bin/pip install openai pgvector --quiet)",
      "Bash(/var/www/call-recording-system/venv/bin/pip install openai --quiet)",
      "Bash(netstat:*)",
      "Bash(xargs kill:*)",
      "Bash(PGPASSWORD=REDACTED_DB_PASSWORD psql -U call_insights_user -d call_insights -h localhost -t -c \"SELECT customer_name, employee_name FROM transcripts WHERE recording_id = ''''2991710249037'''';\")",
      "Bash(PGPASSWORD=REDACTED_DB_PASSWORD psql -U call_insights_user -d call_insights -h localhost -t -c \"SELECT customer_name, employee_name FROM transcripts WHERE recording_id = ''2991710249037'';\")",
      "Bash(PGPASSWORD=REDACTED_DB_PASSWORD psql -U call_insights_user -d call_insights -h localhost -t -c \"SELECT recording_id, LENGTH(transcript_text) as text_length, SUBSTRING(transcript_text, 1, 100) as preview FROM transcripts WHERE recording_id IN (''3020821079036'', ''3024549526036'', ''3044974570036'');\")",
      "Bash(PGPASSWORD=REDACTED_DB_PASSWORD psql -U call_insights_user -d call_insights -h localhost -t -c \"SELECT COUNT(*) FROM transcripts WHERE (customer_name IS NULL OR customer_name = ''Unknown'' OR employee_name IS NULL OR employee_name = ''Unknown'') AND transcript_text IS NOT NULL AND LENGTH(transcript_text) > 100;\")",
      "Bash(PGPASSWORD=REDACTED_DB_PASSWORD psql -U call_insights_user -d call_insights -h localhost -t -c \"SELECT recording_id, customer_name, employee_name, from_phone, to_phone, duration_seconds, call_date FROM transcripts WHERE recording_id = ''2991078440036'';\")",
      "Bash(PGPASSWORD=REDACTED_DB_PASSWORD psql -U call_insights_user -d call_insights -h localhost -c \"\\d transcripts\")",
      "Bash(export PGPASSWORD=REDACTED_DB_PASSWORD)",
      "Bash(PGPASSWORD=REDACTED_DB_PASSWORD psql -U call_insights_user -d call_insights -h localhost -c \"SELECT recording_id, call_date, duration_seconds FROM transcripts WHERE recording_id = ''2991023820036'';\")",
      "Bash(ffprobe:*)",
      "Bash(PGPASSWORD=REDACTED_DB_PASSWORD psql -U call_insights_user -d call_insights -h localhost -c \"\\d recordings\")",
      "Bash(PGPASSWORD=REDACTED_DB_PASSWORD psql -U call_insights_user -d call_insights -h localhost -c \"\\d\")",
      "Bash(PGPASSWORD=REDACTED_DB_PASSWORD psql -U call_insights_user -d call_insights -h localhost -c \"\\d call_recommendations\")",
      "Bash(PGPASSWORD=REDACTED_DB_PASSWORD psql -U call_insights_user -d call_insights -h localhost -c \"\\d insights\")",
      "Bash(PGPASSWORD=REDACTED_DB_PASSWORD psql -U call_insights_user -d call_insights -h localhost -c \"\\d call_resolution\")",
      "Bash(PGPASSWORD=REDACTED_DB_PASSWORD psql -U call_insights_user -d call_insights -h localhost -c \"\\d call_resolutions\")",
      "Bash(PGPASSWORD=REDACTED_DB_PASSWORD psql -U call_insights_user -d call_insights -h localhost -c \"SELECT recording_id FROM insights WHERE recording_id = ''2991080665036'';\")",
      "Bash(PGPASSWORD=REDACTED_DB_PASSWORD psql -U call_insights_user -d call_insights -h localhost -c \"SELECT recording_id FROM call_recommendations WHERE recording_id = ''2991080665036'';\")",
      "Bash(PGPASSWORD=REDACTED_DB_PASSWORD psql -U call_insights_user -d call_insights -h localhost -c \"SELECT recording_id FROM call_resolutions WHERE recording_id = ''2991080665036'';\")",
      "Bash(PGPASSWORD=REDACTED_DB_PASSWORD psql -U call_insights_user -d call_insights -h localhost -c \"SELECT COUNT(*) as total_transcripts FROM transcripts WHERE transcript_text IS NOT NULL AND LENGTH(transcript_text) > 100;\")",
      "Bash(PGPASSWORD=REDACTED_DB_PASSWORD psql -U call_insights_user -d call_insights -h localhost -c \"SELECT \n    (SELECT COUNT(*) FROM insights) as insights_count,\n    (SELECT COUNT(*) FROM call_recommendations) as recommendations_count,\n    (SELECT COUNT(*) FROM call_resolutions) as resolutions_count;\")",
      "Bash(PGPASSWORD=REDACTED_DB_PASSWORD psql -U call_insights_user -d call_insights -h localhost -c \"SELECT COUNT(*) as total_recordings FROM transcripts;\")",
      "Bash(PGPASSWORD=REDACTED_DB_PASSWORD psql -U call_insights_user -d call_insights -h localhost -c \"SELECT \n    COUNT(*) as total_recordings,\n    COUNT(CASE WHEN transcript_text IS NOT NULL AND LENGTH(transcript_text) > 100 THEN 1 END) as completed_transcripts,\n    COUNT(CASE WHEN transcript_text IS NULL OR LENGTH(transcript_text) <= 100 THEN 1 END) as pending_transcripts\nFROM transcripts;\")",
      "Bash(PGPASSWORD=REDACTED_DB_PASSWORD psql -U call_insights_user -d call_insights -h localhost -c \"SELECT COUNT(*) FROM transcripts WHERE transcript_text IS NOT NULL AND LENGTH(transcript_text) > 100 AND recording_id NOT IN (SELECT recording_id FROM insights);\")",
      "Bash(PGPASSWORD=REDACTED_DB_PASSWORD psql -U call_insights_user -d call_insights -h localhost -c \"SELECT COUNT(*) FROM transcripts WHERE transcript_text IS NOT NULL AND LENGTH(transcript_text) > 100;\")",
      "Bash(PGPASSWORD=REDACTED_DB_PASSWORD psql -U call_insights_user -d call_insights -h localhost -c \"SELECT recording_id, LENGTH(transcript_text) as text_length FROM transcripts WHERE transcript_text IS NOT NULL LIMIT 5;\")",
      "Bash(PGPASSWORD=REDACTED_DB_PASSWORD psql -U call_insights_user -d call_insights -h localhost -c \"SELECT customer_name, employee_name, COUNT(*) as count FROM transcripts WHERE transcript_text IS NOT NULL GROUP BY customer_name, employee_name ORDER BY count DESC LIMIT 10;\")",
      "Bash(PGPASSWORD=REDACTED_DB_PASSWORD psql -U call_insights_user -d call_insights -h localhost -c \"SELECT \n    COUNT(*) as total_transcripts,\n    COUNT(CASE WHEN transcript_text IS NOT NULL AND LENGTH(transcript_text) > 100 THEN 1 END) as with_content,\n    (SELECT COUNT(*) FROM transcript_embeddings) as total_embeddings,\n    (SELECT COUNT(*) FROM insights) as insights_count,\n    (SELECT COUNT(*) FROM call_recommendations) as recommendations_count,\n    (SELECT COUNT(*) FROM call_resolutions) as resolutions_count;\")",
      "Bash(PGPASSWORD=REDACTED_DB_PASSWORD psql -U call_insights_user -d call_insights -h localhost -c \"SELECT \n    COUNT(*) as total_transcripts,\n    COUNT(CASE WHEN transcript_text IS NOT NULL AND LENGTH(transcript_text) > 100 THEN 1 END) as with_content,\n    (SELECT COUNT(*) FROM transcript_embeddings) as total_embeddings,\n    (SELECT COUNT(*) FROM insights) as insights_count,\n    (SELECT COUNT(*) FROM call_recommendations) as recommendations_count,\n    (SELECT COUNT(*) FROM call_resolutions) as resolutions_count;\n\")",
      "Bash(PGPASSWORD=REDACTED_DB_PASSWORD psql -U call_insights_user -d call_insights -h localhost -c \"SELECT COUNT(*) as total_transcripts FROM transcripts; SELECT COUNT(*) as total_embeddings FROM transcript_embeddings; SELECT COUNT(*) as insights_count FROM insights; SELECT COUNT(*) as recommendations_count FROM call_recommendations; SELECT COUNT(*) as resolutions_count FROM call_resolutions;\")",
      "Bash(PGPASSWORD=REDACTED_DB_PASSWORD psql -U call_insights_user -d call_insights -h localhost -c \"SELECT COUNT(*) as with_content FROM transcripts WHERE transcript_text IS NOT NULL AND LENGTH(transcript_text) > 100;\")",
      "Bash(PGPASSWORD=REDACTED_DB_PASSWORD psql -U call_insights_user -d call_insights -h localhost -c \"SELECT COUNT(*) as total_embeddings FROM transcript_embeddings;\")",
      "Bash(PGPASSWORD=REDACTED_DB_PASSWORD psql -U call_insights_user -d call_insights -h localhost -c \"\nSELECT COUNT(*) as eligible_for_ai_processing\nFROM transcripts t\nINNER JOIN transcript_embeddings te ON t.recording_id = te.recording_id\nWHERE t.transcript_text IS NOT NULL\nAND LENGTH(t.transcript_text) > 100\nAND NOT EXISTS (\n    SELECT 1 FROM insights i\n    WHERE i.recording_id = t.recording_id\n    AND i.customer_sentiment IS NOT NULL\n);\")",
      "Bash(PGPASSWORD=REDACTED_DB_PASSWORD psql -U call_insights_user -d call_insights -h localhost -c \"SELECT \n    (SELECT COUNT(*) FROM transcript_embeddings) as total_embeddings,\n    (SELECT COUNT(*) FROM insights) as insights_count,\n    (SELECT COUNT(*) FROM call_recommendations) as recommendations_count,\n    (SELECT COUNT(*) FROM call_resolutions) as resolutions_count;\")",
      "Bash(PGPASSWORD=REDACTED_DB_PASSWORD psql -U call_insights_user -d call_insights -h localhost -c \"\n-- Find AI insights without embeddings\nSELECT ''insights_without_embeddings'' as table_name, COUNT(*) as count\nFROM insights i\nWHERE NOT EXISTS (\n    SELECT 1 FROM transcript_embeddings te \n    WHERE te.recording_id = i.recording_id\n)\nUNION ALL\n-- Find recommendations without embeddings  \nSELECT ''recommendations_without_embeddings'' as table_name, COUNT(*) as count\nFROM call_recommendations r\nWHERE NOT EXISTS (\n    SELECT 1 FROM transcript_embeddings te \n    WHERE te.recording_id = r.recording_id\n)\nUNION ALL\n-- Find resolutions without embeddings\nSELECT ''resolutions_without_embeddings'' as table_name, COUNT(*) as count\nFROM call_resolutions cr\nWHERE NOT EXISTS (\n    SELECT 1 FROM transcript_embeddings te \n    WHERE te.recording_id = cr.recording_id\n);\")",
      "Bash(PGPASSWORD=REDACTED_DB_PASSWORD psql -U call_insights_user -d call_insights -h localhost -c \"\n-- Delete insights without embeddings\nDELETE FROM insights \nWHERE recording_id NOT IN (\n    SELECT recording_id FROM transcript_embeddings\n);\n\n-- Delete recommendations without embeddings\nDELETE FROM call_recommendations \nWHERE recording_id NOT IN (\n    SELECT recording_id FROM transcript_embeddings\n);\n\n-- Delete resolutions without embeddings\nDELETE FROM call_resolutions \nWHERE recording_id NOT IN (\n    SELECT recording_id FROM transcript_embeddings\n);\n\n-- Show counts after cleanup\nSELECT \n    (SELECT COUNT(*) FROM insights) as insights_count,\n    (SELECT COUNT(*) FROM call_recommendations) as recommendations_count,\n    (SELECT COUNT(*) FROM call_resolutions) as resolutions_count,\n    (SELECT COUNT(*) FROM transcript_embeddings) as embeddings_count;\")",
      "Bash(PGPASSWORD=REDACTED_DB_PASSWORD psql -U call_insights_user -d call_insights -h localhost -c \"\n-- Verify all AI records now have embeddings\nSELECT \n    ''All insights have embeddings'' as check_name,\n    CASE WHEN COUNT(*) = 0 THEN ''PASS'' ELSE ''FAIL'' END as status\nFROM insights i\nWHERE NOT EXISTS (\n    SELECT 1 FROM transcript_embeddings te \n    WHERE te.recording_id = i.recording_id\n)\nUNION ALL\nSELECT \n    ''All recommendations have embeddings'' as check_name,\n    CASE WHEN COUNT(*) = 0 THEN ''PASS'' ELSE ''FAIL'' END as status\nFROM call_recommendations r\nWHERE NOT EXISTS (\n    SELECT 1 FROM transcript_embeddings te \n    WHERE te.recording_id = r.recording_id\n)\nUNION ALL\nSELECT \n    ''All resolutions have embeddings'' as check_name,\n    CASE WHEN COUNT(*) = 0 THEN ''PASS'' ELSE ''FAIL'' END as status\nFROM call_resolutions cr\nWHERE NOT EXISTS (\n    SELECT 1 FROM transcript_embeddings te \n    WHERE te.recording_id = cr.recording_id\n);\")",
      "Bash(PGPASSWORD=REDACTED_DB_PASSWORD psql:*)",
      "Read(//tmp/**)",
      "Bash(timeout:*)",
      "Bash(while true)",
      "Bash(done)",
      "Bash(lsof:*)",
      "Bash(xargs -I {} sh -c 'echo \"\"\"\"=== {} ===\"\"\"\" && head -50 {}')",
      "Bash(gcloud --version:*)",
      "Bash(tar:*)",
      "Bash(/tmp/google-cloud-sdk/install.sh:*)",
      "Bash(sudo mv:*)",
      "Bash(sudo chmod:*)",
      "Bash(gcloud auth login:*)",
      "Bash(gcloud projects list:*)",
      "Bash(gcloud projects create:*)",
      "Bash(gcloud config set:*)",
      "Bash(gcloud billing accounts list:*)",
      "Bash(gcloud billing projects link:*)",
      "Bash(gcloud services enable:*)",
      "Bash(gcloud iam service-accounts create:*)",
      "Bash(gcloud projects add-iam-policy-binding:*)",
      "Bash(gcloud iam service-accounts keys create:*)",
      "Bash(gsutil mb:*)",
      "Bash(gcloud config:*)",
      "Bash(gcloud services list:*)",
      "Bash(gcloud iam service-accounts list:*)",
      "Bash(gsutil ls:*)",
      "Bash(pip install:*)",
      "Bash(python src/migration/export_to_vertex.py:*)",
      "Bash(python src/migration/import_to_rag.py:*)",
      "Bash(python -m json.tool:*)",
      "Bash(python src/migration/migrate_to_vertex.py:*)",
      "Bash(ls:*)"
    ],
    "deny": [],
    "ask": []
  }
}
